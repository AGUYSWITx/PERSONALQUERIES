CREATE OR ALTER PROC  [dbo].[WSP_STOCKSETTLEMNTREGISTER]
--declare

	@DATE1 DATETIME,
	@DATE2 DATETIME,
	@SETTLEMENTMODE varchar(25) = '%',
	@DIVISION VARCHAR(15) = '%'
AS

--select  @DATE1='2022-10-01 00:00:00',@DATE2='2023-06-22 00:00:00',@SETTLEMENTMODE=N'%',@DIVISION=N'%'

DECLARE @RESULT TABLE (TRNDATE	VARCHAR(300), BSDATE VARCHAR(300), 	VCHRNO VARCHAR(300), 	TRNMODE VARCHAR(300), 	UNIT VARCHAR(300), 	RATE	VARCHAR(300), INQTY	VARCHAR(300),  OUTQTY VARCHAR(300), 	AMOUNT	VARCHAR(300),  REMARKS	VARCHAR(300),  FLAG	 VARCHAR(300), VNO	VARCHAR(300), TDATE VARCHAR(300))

INSERT INTO @RESULT
exec RSP_STOCKSETTLEMNTREGISTER @DATE1=@DATE1,@DATE2=@DATE2,@SETTLEMENTMODE=@SETTLEMENTMODE,@DIVISION=@DIVISION


SELECT * ,COUNT(*) OVER () ALLCOUNT FROM @RESULT 



 